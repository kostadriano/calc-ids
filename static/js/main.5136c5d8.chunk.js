(this["webpackJsonps-dimorph"]=this["webpackJsonps-dimorph"]||[]).push([[0],{328:function(e,a){},351:function(e,a,n){e.exports=n(429)},356:function(e,a,n){},426:function(e,a){},427:function(e,a){},429:function(e,a,n){"use strict";n.r(a);var t=n(0),r=n.n(t),o=n(15),i=n.n(o);n(356),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(457),l=n(227),s=n(78),u=n(89),m=n(148),d=n(52),p=n(198),f=n(336),v=n.n(f),g=function(e){var a=e.options,n=Object(p.a)(e,["options"]);return r.a.createElement(v.a,Object.assign({options:Object(u.a)({search:!1,actionsColumnIndex:-1,paging:!1},a)},n))};g.defaultProps={options:{}};var h=g,b=n(188),y=n(340),E={M:"M",F:"F"},x=function(e){return null!=e&&""!==e},A=function(e,a){return Number(a)<=Number(e)},j=[{title:"Nome da esp\xe9cie",field:"speciesName",validate:function(e){var a=e.speciesName;return x(a)}},{title:"Sexo",field:"sex",lookup:E,validate:function(e){var a=e.sex;return x(a)}},{title:"Tamanho",field:"size",initialEditValue:0,validate:function(e){var a=e.size;return x(a)&&A(a,0)},editComponent:function(e){var a=e.value,n=e.onChange,t=e.error;return r.a.createElement(b.a,{required:!0,placeholder:"Tamanho",min:"0",value:a,onChange:function(e){var a=e.target;return n(a.value)},error:t,type:"number"})}}],D=function(e){var a=e.size,n=Object(p.a)(e,["size"]);return Object(u.a)({},n,{size:Number(a),id:Object(y.v4)()})},O=function(e){var a=e.samples,n=e.onSampleAdd,t=e.onSampleDelete,o=e.onSampleUpdate;return r.a.createElement(h,{title:"Amostras (".concat(a.length,")"),data:a,columns:j,editable:{onRowAdd:function(e){return new Promise((function(a){n(e),a()}))},onRowUpdate:function(e){return new Promise((function(a){o(e),a()}))},onRowDelete:function(e){return new Promise((function(a){t(e),a()}))}},options:{addRowPosition:"first",paging:!0,maxBodyHeight:"250px",pageSize:10,pageSizeOptions:[5,10,25,50],rowStyle:{fontSize:"14px"}}})},w=n(314),S=[{title:"Esp\xe9cie",field:"species"},{title:"Numero de amostras",field:"samples"},{title:"M\xe9dia tamanho f\xeameas",field:"femalesAverage"},{title:"M\xe9dia tamanho machos",field:"malesAverage"},{title:"SDI",field:"SDI"}],C=function(e){var a,n=e.result;return r.a.createElement(h,{title:"Resultado do c\xe1lculo do SDI",columns:S,data:(a=n,a.map((function(e){return Object(u.a)({},e,{samples:e.samples.length,malesAverage:e.malesAverage.toFixed(2),femalesAverage:e.femalesAverage.toFixed(2),SDI:e.SDI.toFixed(2)})}))),options:{exportButton:!0}})},k=function(e){var a=e.calculationResult,n=e.handleCalculation,t=e.disabled;return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{textAlign:"right",marginTop:5},r.a.createElement(w.a,{onClick:n,variant:"contained",color:"secondary",disabled:t},"Calcular SDI")),a&&r.a.createElement(l.a,{marginTop:2},r.a.createElement(C,{result:a})))},F=n(90),z=n.n(F),N=n(147),T=n(449),R=n(459),M=n(450),B=n(458),I=n(451),L=n(460),_=n(99),P=n.n(_),q=n(342),W=n.n(q),U=n(343),H=function(e){var a=e.acceptedMimeTypes,n=e.onChange,t=e.classes,o=e.disabled,i=r.a.useState(null),c=Object(d.a)(i,2),l=c[0],u=c[1];return r.a.createElement(U.a,{onDrop:function(e,a){if(!(a.length>0)){var t=Object(d.a)(e,1)[0];n(t),u(t.name)}},accept:a,multiple:!1},(function(e){var a=e.getRootProps,n=e.getInputProps,i=e.isDragActive,c=e.isDragReject,u=function(e){var a=e.isDragActive,n=e.isDragReject;return e.disabled?t.Dropzone_disabled:n?t.Dropzone_onDragReject:a?t.Dropzone_onDrag:null}({isDragActive:i,isDragReject:c,disabled:o});return r.a.createElement("div",Object.assign({variant:"contained",color:"primary"},a(),{className:"".concat(t.Dropzone," ").concat(u)}),r.a.createElement("input",n()),r.a.createElement(W.a,null),r.a.createElement("div",null,c?"Formato n\xe3o suportado":"Arraste o arquivo aqui, ou clique para adicionar"),l&&r.a.createElement("div",{className:t.Dropzone_selectedFile},r.a.createElement(s.a,null,"Selecionado:"),r.a.createElement(s.a,{variant:"body1"}," ".concat(l))))}))};H.defaultProps={onChange:function(){},acceptedMimeTypes:["image/*"],label:"Arquivo",currentFileName:"",disabled:!1};var J=P()((function(e){return{Dropzone:{margin:"5px 0",display:"flex",flexDirection:"column",alignItems:"center",color:"#101010",backgroundColor:"#F5F5F5",padding:"10px 16px",fontSize:"0.875rem",minWidth:"64px",borderRadius:"4px",fontWeight:500,fontFamily:"Roboto, Helvetica, Arial, sans-serif",border:"2px solid transparent",cursor:"pointer",outline:"none","&:hover":{backgroundColor:"#D9D9D9"}},Dropzone_onDrag:{backgroundColor:"#FAFAFA",color:"#497530",border:"2px dashed #497530"},Dropzone_onDragReject:{backgroundColor:"#FAFAFA",color:"#D32F2F",border:"2px dashed #D32F2F"},Dropzone_disabled:{opacity:.6,"&:hover":{backgroundColor:"inherit",cursor:"not-allowed"}},Dropzone_selectedFile:{color:"inherit",display:"flex",marginTop:e.spacing(),textTransform:"none"}}}))(H),G=n(301),V=n(5),$=Object(V.a)((function(){return{Loading:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",width:"100%",height:"100%",top:0,left:0,backgroundColor:"rgba(220, 220, 220, 0.6)",zIndex:1e4}}}))((function(e){var a=e.classes;return r.a.createElement("div",{className:a.Loading},r.a.createElement(G.a,null))})),K=Object(V.a)((function(){return{LoadingWrapper:{position:"relative"}}}))((function(e){var a=e.loading,n=e.children,t=e.classes;return r.a.createElement("div",{className:t.LoadingWrapper},a&&r.a.createElement($,null),n)})),Q=n(240),X=n.n(Q),Y=function(e){return new Promise((function(a,n){var t=new FileReader;t.onload=function(e){var n=e.target.result,t=X.a.read(n,{type:"binary"}),r=Object(d.a)(t.SheetNames,1)[0],o=t.Sheets[r],i=X.a.utils.sheet_to_row_object_array(o,{defval:null});a(i)},t.onerror=function(e){n(e)},t.readAsBinaryString(e)}))},Z=function(e){return""===e||null==e||(Array.isArray(e)?!e.length:"object"===typeof e&&!Object.keys(e).length)},ee=function(e){throw new Error(e)},ae={speciesName:{validate:function(e,a){return Z(e)&&ee("Linha ".concat(a,": O nome da esp\xe9cie n\xe3o pode ser vazio")),e}},sex:{validate:function(e,a){Z(e)&&ee("Linha ".concat(a,": O sexo n\xe3o pode ser vazio"));var n=Object.keys(E),t=e.toUpperCase();return n.includes(t)||ee("Linha ".concat(a,": O sexo deve ser um dos valores: ").concat(n.toString())),t}},size:{validate:function(e,a){Z(e)&&ee("Linha ".concat(a,": O tamanho n\xe3o pode ser vazio"));var n=Number(e);return isNaN(n)&&ee("Linha ".concat(a,": Tamanho deve ser um n\xfamero")),n}}},ne=[{format:"csv",mimeType:"text/csv"},{format:"ods",mimeType:"application/vnd.oasis.opendocument.spreadsheet"},{format:"xls",mimeType:"application/vnd.ms-excel"},{format:"xlsx",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}],te=ne.map((function(e){return e.format})),re=ne.map((function(e){return e.mimeType})),oe=function(e){return e.length||ee("A tabela n\xe3o possui nenhum registro."),e.map((function(e,a){return Object.keys(e).reduce((function(n,t){var r=ae[t],o=e[t],i=a+2;return n[t]=r.validate?r.validate(o,i):o,n}),{})}))},ie=function(){var e=Object(N.a)(z.a.mark((function e(a){var n,t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(a);case 2:return n=e.sent,t=n.map((function(e){var a=Object.keys(ae);return Object.keys(e).reduce((function(n,t,r){return n[a[r]]=e[t],n}),{})})),e.abrupt("return",oe(t));case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ce=function(e){var a=e.open,n=e.onClose,t=e.onSubmit,o=r.a.useState(null),i=Object(d.a)(o,2),c=i[0],s=i[1],u=r.a.useState([]),m=Object(d.a)(u,2),p=m[0],f=m[1],v=r.a.useState(!1),g=Object(d.a)(v,2),h=g[0],b=g[1],y=function(){var e=Object(N.a)(z.a.mark((function e(a){var n,t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.prev=1,e.next=4,ie(a);case 4:n=e.sent,f(n),s(null),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t=e.t0.message,s(t);case 13:b(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}(),E=function(){var e=Object(N.a)(z.a.mark((function e(a){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),a.stopPropagation(),t(p);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(T.a,{fullWidth:!0,open:a,onClose:n,disableBackdropClick:!0},r.a.createElement(K,{loading:h},r.a.createElement(R.a,null,r.a.createElement(l.a,{display:"flex",justifyContent:"space-between"},"Adicionar Amostras",r.a.createElement(w.a,{color:"primary",variant:"outlined",onClick:function(){return window.open("/s-dimorph/tabela-amostras-exemplo.csv")}},"Baixar Modelo"))),r.a.createElement(M.a,null,r.a.createElement(B.a,null,"Formatos aceitos: ",te.join(", ")),r.a.createElement(J,{onChange:y,acceptedMimeTypes:re}),!!c&&r.a.createElement(l.a,{marginTop:"16px"},r.a.createElement(L.a,{severity:"error"},"Erro! ",c))),r.a.createElement(I.a,null,r.a.createElement(w.a,{color:"primary",onClick:n},"Cancelar"),r.a.createElement(w.a,{color:"primary",variant:"contained",onClick:E,disabled:!!c||!p.length},"Confirmar"))))},le=function(e){var a=document.querySelector("#loading-wrapper");e?a.classList.add("loading-indicator"):a.classList.remove("loading-indicator")},se=function(){return Array.apply(null,Array(35)).map((function(e){return D({speciesName:["A","B","C"][Math.floor(3*Math.random())],sex:["F","M"][Math.floor(2*Math.random())],size:Math.floor(10*Math.random())})}))},ue=function(e){return Object.keys(e).reduce((function(a,n){var t=e[n],r=de(t),o=r.males,i=r.females,c=me({males:o,females:i}),l=c.malesAverage,s=c.femalesAverage,u=fe({malesAverage:l,femalesAverage:s});return[].concat(Object(m.a)(a),[{species:n,samples:t,males:o,females:i,malesAverage:l,femalesAverage:s,SDI:u}])}),[])},me=function(e){var a=e.males,n=e.females;return{malesAverage:pe(a),femalesAverage:pe(n)}},de=function(e){return{males:ve.filterBy(e,"sex","M"),females:ve.filterBy(e,"sex","F")}},pe=function(e){return e.length?e.reduce((function(e,a){return e+Number(a.size||0)}),0)/e.length:0},fe=function(e){var a=e.malesAverage,n=e.femalesAverage;return a&&n?a>n?-1*(a/n-1):n/a-1:0},ve={groupBy:function(e,a){return e.reduce((function(e,n){var t=e[n[a]]||[];return e[n[a]]=[].concat(Object(m.a)(t),[n]),e}),{})},filterBy:function(e,a,n){return e.filter((function(e){return e[a]===n}))}},ge=function(e){var a=ve.groupBy(e,"speciesName");return ue(a)},he=function(e){return ge(e)},be=function(){var e=r.a.useState([]),a=Object(d.a)(e,2),n=a[0],o=a[1],i=r.a.useState(null),c=Object(d.a)(i,2),s=c[0],p=c[1],f=r.a.useState(!1),v=Object(d.a)(f,2),g=v[0],h=v[1],b=Object(t.useRef)(null);Object(t.useEffect)((function(){le(!1)}),[n,s]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{justifyContent:"flex-end",marginBottom:2,display:"flex"},r.a.createElement(w.a,{onClick:function(){o(se())},variant:"outlined",color:"primary"},"Gerar Amostras Aleat\xf3rias"),r.a.createElement(l.a,{marginLeft:2},r.a.createElement(w.a,{variant:"contained",color:"primary",onClick:function(){return h(!0)}},"Adicionar Amostras por Arquivo"))),r.a.createElement(O,{samples:n,onSampleAdd:function(e){var a=D(e);o([].concat(Object(m.a)(n),[a]))},onSampleDelete:function(e){var a=n.filter((function(a){return a.id!==e.id}));o(a)},onSampleUpdate:function(e){var a=n.map((function(a){return a.id===e.id?Object(u.a)({},a,{},e):a}));o(a)}}),r.a.createElement("span",{ref:b},r.a.createElement(k,{calculationResult:s,disabled:0===n.length,handleCalculation:function(){le(!0);var e=he(n);p(e),window.scrollTo(0,b.current.offsetTop)}})),r.a.createElement(ce,{open:g,onClose:function(){return h(!1)},onSubmit:function(e){le(!0),h(!1);var a=e.map(D);o(a)}}))},ye=(n(428),function(){return r.a.createElement(c.a,{component:"main",p:5},r.a.createElement(l.a,{mt:2,py:3,textAlign:"center"},r.a.createElement(s.a,{variant:"h2",paragraph:!0},"S-Dimorph"),r.a.createElement(be,null)))});i.a.render(r.a.createElement(ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[351,1,2]]]);
//# sourceMappingURL=main.5136c5d8.chunk.js.map