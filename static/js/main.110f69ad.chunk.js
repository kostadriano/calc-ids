(this["webpackJsonps-dimorph"]=this["webpackJsonps-dimorph"]||[]).push([[0],{327:function(e,a){},350:function(e,a,n){e.exports=n(428)},355:function(e,a,n){},425:function(e,a){},426:function(e,a){},428:function(e,a,n){"use strict";n.r(a);var t=n(0),r=n.n(t),o=n(15),i=n.n(o);n(355),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(455),l=n(226),s=n(78),u=n(88),m=n(147),d=n(58),p=n(197),f=n(335),v=n.n(f),g=function(e){var a=e.options,n=Object(p.a)(e,["options"]);return r.a.createElement(v.a,Object.assign({options:Object(u.a)({search:!1,actionsColumnIndex:-1,paging:!1},a)},n))};g.defaultProps={options:{}};var b=g,h=n(187),y=n(339),E=function(e){return null!=e&&""!==e},x=function(e,a){return Number(a)<=Number(e)},A=[{title:"Nome da esp\xe9cie",field:"speciesName",validate:function(e){var a=e.speciesName;return E(a)}},{title:"Sexo",field:"sex",lookup:{M:"M",F:"F"},validate:function(e){var a=e.sex;return E(a)}},{title:"Tamanho",field:"size",initialEditValue:0,validate:function(e){var a=e.size;return E(a)&&x(a,0)},editComponent:function(e){var a=e.value,n=e.onChange,t=e.error;return r.a.createElement(h.a,{required:!0,placeholder:"Tamanho",min:"0",value:a,onChange:function(e){var a=e.target;return n(a.value)},error:t,type:"number"})}}],D=function(e){var a=e.size,n=Object(p.a)(e,["size"]);return Object(u.a)({},n,{size:Number(a),id:Object(y.v4)()})},j=function(e){var a=e.samples,n=e.onSampleAdd,t=e.onSampleDelete,o=e.onSampleUpdate;return r.a.createElement(b,{title:"Amostras (".concat(a.length,")"),data:a,columns:A,editable:{onRowAdd:function(e){return new Promise((function(a){n(e),a()}))},onRowUpdate:function(e){return new Promise((function(a){o(e),a()}))},onRowDelete:function(e){return new Promise((function(a){t(e),a()}))}},options:{addRowPosition:"first",maxBodyHeight:"250px",rowStyle:{fontSize:"14px"}}})},C=n(313),S=[{title:"Esp\xe9cie",field:"species"},{title:"Numero de amostras",field:"samples"},{title:"M\xe9dia tamanho f\xeameas",field:"femalesAverage"},{title:"M\xe9dia tamanho machos",field:"malesAverage"},{title:"SDI",field:"SDI"}],w=function(e){var a,n=e.result;return r.a.createElement(b,{title:"Resultado do c\xe1lculo do SDI",columns:S,data:(a=n,a.map((function(e){return Object(u.a)({},e,{samples:e.samples.length,malesAverage:e.malesAverage.toFixed(2),femalesAverage:e.femalesAverage.toFixed(2),SDI:e.SDI.toFixed(2)})}))),options:{exportButton:!0}})},F=function(e){var a=e.calculationResult,n=e.handleCalculation,t=e.disabled;return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{textAlign:"right",marginTop:5},r.a.createElement(C.a,{onClick:n,variant:"contained",color:"secondary",disabled:t},"Calcular SDI")),a&&r.a.createElement(l.a,{marginTop:2},r.a.createElement(w,{result:a})))},O=n(89),k=n.n(O),z=n(146),N=n(447),M=n(457),R=n(448),B=n(456),T=n(449),I=n(98),_=n.n(I),P=n(341),q=n.n(P),L=n(342),W=function(e){var a=e.acceptedMimeTypes,n=e.onChange,t=e.classes,o=e.disabled,i=r.a.useState(null),c=Object(d.a)(i,2),l=c[0],u=c[1];return r.a.createElement(L.a,{onDrop:function(e,a){if(!(a.length>0)){var t=Object(d.a)(e,1)[0];n(t),u(t.name)}},accept:a,multiple:!1},(function(e){var a=e.getRootProps,n=e.getInputProps,i=e.isDragActive,c=e.isDragReject,u=function(e){var a=e.isDragActive,n=e.isDragReject;return e.disabled?t.Dropzone_disabled:n?t.Dropzone_onDragReject:a?t.Dropzone_onDrag:null}({isDragActive:i,isDragReject:c,disabled:o});return r.a.createElement("div",Object.assign({variant:"contained",color:"primary"},a(),{className:"".concat(t.Dropzone," ").concat(u)}),r.a.createElement("input",n()),r.a.createElement(q.a,null),r.a.createElement("div",null,c?"Formato n\xe3o suportado":"Arraste o arquivo aqui, ou clique para adicionar"),l&&r.a.createElement("div",{className:t.Dropzone_selectedFile},r.a.createElement(s.a,null,"Selecionado:"),r.a.createElement(s.a,{variant:"body1"}," ".concat(l))))}))};W.defaultProps={onChange:function(){},acceptedMimeTypes:["image/*"],label:"Arquivo",currentFileName:"",disabled:!1};var U=_()((function(e){return{Dropzone:{margin:"5px 0",display:"flex",flexDirection:"column",alignItems:"center",color:"#101010",backgroundColor:"#F5F5F5",padding:"10px 16px",fontSize:"0.875rem",minWidth:"64px",borderRadius:"4px",fontWeight:500,fontFamily:"Roboto, Helvetica, Arial, sans-serif",border:"2px solid transparent",cursor:"pointer",outline:"none","&:hover":{backgroundColor:"#D9D9D9"}},Dropzone_onDrag:{backgroundColor:"#FAFAFA",color:"#497530",border:"2px dashed #497530"},Dropzone_onDragReject:{backgroundColor:"#FAFAFA",color:"#D32F2F",border:"2px dashed #D32F2F"},Dropzone_disabled:{opacity:.6,"&:hover":{backgroundColor:"inherit",cursor:"not-allowed"}},Dropzone_selectedFile:{color:"inherit",display:"flex",marginTop:e.spacing(),textTransform:"none"}}}))(W),H=n(300),J=n(5),G=Object(J.a)((function(){return{Loading:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",width:"100%",height:"100%",top:0,left:0,backgroundColor:"rgba(220, 220, 220, 0.6)",zIndex:1e4}}}))((function(e){var a=e.classes;return r.a.createElement("div",{className:a.Loading},r.a.createElement(H.a,null))})),V=Object(J.a)((function(){return{LoadingWrapper:{position:"relative"}}}))((function(e){var a=e.loading,n=e.children,t=e.classes;return r.a.createElement("div",{className:t.LoadingWrapper},a&&r.a.createElement(G,null),n)})),$=n(239),K=n.n($),Q=function(e){return new Promise((function(a,n){var t=new FileReader;t.onload=function(e){var n=e.target.result,t=K.a.read(n,{type:"binary"}),r=Object(d.a)(t.SheetNames,1)[0],o=t.Sheets[r],i=K.a.utils.sheet_to_row_object_array(o);a(i)},t.onerror=function(e){n(e)},t.readAsBinaryString(e)}))},X=["speciesName","sex","size"],Y=[{format:"csv",mimeType:"text/csv"},{format:"ods",mimeType:"application/vnd.oasis.opendocument.spreadsheet"},{format:"xls",mimeType:"application/vnd.ms-excel"},{format:"xlsx",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}],Z=Y.map((function(e){return e.format})),ee=Y.map((function(e){return e.mimeType})),ae=function(){var e=Object(z.a)(k.a.mark((function e(a){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(a);case 2:return n=e.sent,e.abrupt("return",n.map((function(e){return Object.keys(e).reduce((function(a,n,t){return a[X[t]]=e[n],a}),{})})));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ne=function(e){var a=e.open,n=e.onClose,t=e.onSubmit,o=r.a.useState([]),i=Object(d.a)(o,2),c=i[0],s=i[1],u=r.a.useState(!1),m=Object(d.a)(u,2),p=m[0],f=m[1],v=function(){var e=Object(z.a)(k.a.mark((function e(a){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,ae(a);case 3:n=e.sent,s(n),f(!1);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),g=function(){var e=Object(z.a)(k.a.mark((function e(a){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),a.stopPropagation(),t(c);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(N.a,{fullWidth:!0,open:a,onClose:n,disableBackdropClick:!0},r.a.createElement(V,{loading:p},r.a.createElement(M.a,null,r.a.createElement(l.a,{display:"flex",justifyContent:"space-between"},"Adicionar Amostras",r.a.createElement(C.a,{color:"primary",variant:"outlined",onClick:function(){return window.open("/s-dimorph/tabela-amostras-exemplo.csv")}},"Baixar Modelo"))),r.a.createElement(R.a,null,r.a.createElement(B.a,null,"Formatos aceitos: ",Z.join(", ")),r.a.createElement(U,{onChange:v,acceptedMimeTypes:ee})),r.a.createElement(T.a,null,r.a.createElement(C.a,{color:"primary",onClick:n},"Cancelar"),r.a.createElement(C.a,{color:"primary",variant:"contained",onClick:g},"Confirmar"))))},te=function(e){var a=document.querySelector("#loading-wrapper");e?a.classList.add("loading-indicator"):a.classList.remove("loading-indicator")},re=function(){return Array.apply(null,Array(35)).map((function(e){return D({speciesName:["A","B","C"][Math.floor(3*Math.random())],sex:["F","M"][Math.floor(2*Math.random())],size:Math.floor(10*Math.random())})}))},oe=function(e){return Object.keys(e).reduce((function(a,n){var t=e[n],r=ce(t),o=r.males,i=r.females,c=ie({males:o,females:i}),l=c.malesAverage,s=c.femalesAverage,u=se({malesAverage:l,femalesAverage:s});return[].concat(Object(m.a)(a),[{species:n,samples:t,males:o,females:i,malesAverage:l,femalesAverage:s,SDI:u}])}),[])},ie=function(e){var a=e.males,n=e.females;return{malesAverage:le(a),femalesAverage:le(n)}},ce=function(e){return{males:ue.filterBy(e,"sex","M"),females:ue.filterBy(e,"sex","F")}},le=function(e){return e.length?e.reduce((function(e,a){return e+Number(a.size||0)}),0)/e.length:0},se=function(e){var a=e.malesAverage,n=e.femalesAverage;return a&&n?a>n?-1*(a/n-1):n/a-1:0},ue={groupBy:function(e,a){return e.reduce((function(e,n){var t=e[n[a]]||[];return e[n[a]]=[].concat(Object(m.a)(t),[n]),e}),{})},filterBy:function(e,a,n){return e.filter((function(e){return e[a]===n}))}},me=function(e){var a=ue.groupBy(e,"speciesName");return oe(a)},de=function(e){return me(e)},pe=function(){var e=r.a.useState([]),a=Object(d.a)(e,2),n=a[0],o=a[1],i=r.a.useState(null),c=Object(d.a)(i,2),s=c[0],p=c[1],f=r.a.useState(!1),v=Object(d.a)(f,2),g=v[0],b=v[1];Object(t.useEffect)((function(){te(!1)}),[n]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{justifyContent:"flex-end",marginBottom:2,display:"flex"},r.a.createElement(C.a,{onClick:function(){o(re())},variant:"outlined",color:"primary"},"Gerar Amostras Aleat\xf3rias"),r.a.createElement(l.a,{marginLeft:2},r.a.createElement(C.a,{variant:"contained",color:"primary",onClick:function(){return b(!0)}},"Adicionar Amostras por Arquivo"))),r.a.createElement(j,{samples:n,onSampleAdd:function(e){var a=D(e);o([].concat(Object(m.a)(n),[a]))},onSampleDelete:function(e){var a=n.filter((function(a){return a.id!==e.id}));o(a)},onSampleUpdate:function(e){var a=n.map((function(a){return a.id===e.id?Object(u.a)({},a,{},e):a}));o(a)}}),r.a.createElement(F,{calculationResult:s,disabled:0===n.length,handleCalculation:function(){var e=de(n);p(e)}}),r.a.createElement(ne,{open:g,onClose:function(){return b(!1)},onSubmit:function(e){te(!0),b(!1);var a=e.map(D);console.log("one line before setSamples"),o(a)}}))},fe=(n(427),function(){return r.a.createElement(c.a,{component:"main",p:5},r.a.createElement(l.a,{mt:2,py:3,textAlign:"center"},r.a.createElement(s.a,{variant:"h2",paragraph:!0},"S-Dimorph"),r.a.createElement(pe,null)))});i.a.render(r.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[350,1,2]]]);
//# sourceMappingURL=main.110f69ad.chunk.js.map