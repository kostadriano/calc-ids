(this["webpackJsonps-dimorph"]=this["webpackJsonps-dimorph"]||[]).push([[0],{328:function(e,a){},352:function(e,a,t){e.exports=t(430)},357:function(e,a,t){},427:function(e,a){},428:function(e,a){},430:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(15),i=t.n(o);t(357),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=t(459),l=t(227),s=t(78),u=t(48),m=t(447),p=t(450),d=t(451),f=t(452),v=t(453),g=t(301),h=t(460),b=function(){var e={open:!1,title:"",text:"",error:""},a=r.a.useState(e),t=Object(u.a)(a,2),n=t[0],o=t[1];return window.openAlertModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.text,t=e.title,n=e.error;o({text:a,title:t,error:n,open:!0})},r.a.createElement(m.a,{open:n.open,disableBackdropClick:!0,fullWidth:!0},n.title&&r.a.createElement(p.a,null,n.title),r.a.createElement(d.a,null,n.text&&r.a.createElement(f.a,null,n.text),n.error&&r.a.createElement(h.a,{severity:"error"},"Erro! ",n.error),r.a.createElement(v.a,null,r.a.createElement(g.a,{color:"primary",variant:"contained",onClick:function(){o(e)}},"Confirmar"))))},E=t(89),x=t(148),y=t(198),A=t(336),j=t.n(A),w=function(e){var a=e.options,t=Object(y.a)(e,["options"]);return r.a.createElement(j.a,Object.assign({options:Object(E.a)({search:!1,actionsColumnIndex:-1,paging:!1},a)},t))};w.defaultProps={options:{}};var O=w,D=t(189),S=t(340),C={M:"M",F:"F"},k=function(e){return null!=e&&""!==e},F=function(e,a){return Number(a)<=Number(e)},z=[{title:"Nome da esp\xe9cie",field:"speciesName",validate:function(e){var a=e.speciesName;return k(a)}},{title:"Sexo",field:"sex",lookup:C,validate:function(e){var a=e.sex;return k(a)}},{title:"Tamanho",field:"size",initialEditValue:0,validate:function(e){var a=e.size;return k(a)&&F(a,0)},editComponent:function(e){var a=e.value,t=e.onChange,n=e.error;return r.a.createElement(D.a,{required:!0,placeholder:"Tamanho",min:"0",value:a,onChange:function(e){var a=e.target;return t(a.value)},error:n,type:"number"})}}],N=function(e){var a=e.size,t=Object(y.a)(e,["size"]);return Object(E.a)({},t,{size:Number(a),id:Object(S.v4)()})},M=function(e){var a=e.samplesNumber;e.onButtonClick;return r.a.createElement(l.a,{display:"flex"},r.a.createElement(l.a,{mr:5},r.a.createElement(s.a,{variant:"h6"},"Amostras (",a,")")),r.a.createElement(g.a,{variant:"contained",color:"primary"}," Calcular IDS"))},R=function(e){var a=e.samples,t=e.onSampleAdd,n=e.onSampleDelete,o=e.onSampleUpdate;return r.a.createElement(O,{title:r.a.createElement(M,{samplesNumber:a.length}),data:a,columns:z,editable:{onRowAdd:function(e){return new Promise((function(a){t(e),a()}))},onRowUpdate:function(e){return new Promise((function(a){o(e),a()}))},onRowDelete:function(e){return new Promise((function(a){n(e),a()}))}},options:{addRowPosition:"first",paging:!0,pageSize:10,showEmptyDataSourceMessage:!1,pageSizeOptions:[5,10,25,50],rowStyle:{fontSize:"14px"}}})},T=[{title:"Esp\xe9cie",field:"species"},{title:"Numero de amostras",field:"samples"},{title:"M\xe9dia tamanho f\xeameas",field:"femalesAverage"},{title:"M\xe9dia tamanho machos",field:"malesAverage"},{title:"IDS",field:"SDI"}],B=function(e){var a,t=e.result;return r.a.createElement(O,{title:"Resultado do c\xe1lculo do \xcdndice de Dimorfismo Sexual",columns:T,data:(a=t,a.map((function(e){return Object(E.a)({},e,{samples:e.samples.length,malesAverage:e.malesAverage.toFixed(2),femalesAverage:e.femalesAverage.toFixed(2),SDI:e.SDI.toFixed(2)})}))),options:{exportButton:!0}})},I=function(e){var a=e.calculationResult,t=e.handleCalculation,n=e.disabled;return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{textAlign:"right",marginTop:5},r.a.createElement(g.a,{onClick:t,variant:"contained",color:"secondary",disabled:n},"Calcular IDS")),a&&r.a.createElement(l.a,{marginTop:2},r.a.createElement(B,{result:a})))},L=t(90),_=t.n(L),P=t(147),W=t(99),q=t.n(W),U=t(342),J=t.n(U),G=t(343),H=function(e){var a=e.acceptedMimeTypes,t=e.onChange,n=e.classes,o=e.disabled,i=r.a.useState(null),c=Object(u.a)(i,2),l=c[0],m=c[1];return r.a.createElement(G.a,{onDrop:function(e,a){if(!(a.length>0)){var n=Object(u.a)(e,1)[0];t(n),m(n.name)}},accept:a,multiple:!1},(function(e){var a=e.getRootProps,t=e.getInputProps,i=e.isDragActive,c=e.isDragReject,u=function(e){var a=e.isDragActive,t=e.isDragReject;return e.disabled?n.Dropzone_disabled:t?n.Dropzone_onDragReject:a?n.Dropzone_onDrag:null}({isDragActive:i,isDragReject:c,disabled:o});return r.a.createElement("div",Object.assign({variant:"contained",color:"primary"},a(),{className:"".concat(n.Dropzone," ").concat(u)}),r.a.createElement("input",t()),r.a.createElement(J.a,null),r.a.createElement("div",null,c?"Formato n\xe3o suportado":"Arraste o arquivo aqui, ou clique para adicionar"),l&&r.a.createElement("div",{className:n.Dropzone_selectedFile},r.a.createElement(s.a,null,"Selecionado:"),r.a.createElement(s.a,{variant:"body1"}," ".concat(l))))}))};H.defaultProps={onChange:function(){},acceptedMimeTypes:["image/*"],label:"Arquivo",currentFileName:"",disabled:!1};var V=q()((function(e){return{Dropzone:{margin:"5px 0",display:"flex",flexDirection:"column",alignItems:"center",color:"#101010",backgroundColor:"#F5F5F5",padding:"10px 16px",fontSize:"0.875rem",minWidth:"64px",borderRadius:"4px",fontWeight:500,fontFamily:"Roboto, Helvetica, Arial, sans-serif",border:"2px solid transparent",cursor:"pointer",outline:"none","&:hover":{backgroundColor:"#D9D9D9"}},Dropzone_onDrag:{backgroundColor:"#FAFAFA",color:"#497530",border:"2px dashed #497530"},Dropzone_onDragReject:{backgroundColor:"#FAFAFA",color:"#D32F2F",border:"2px dashed #D32F2F"},Dropzone_disabled:{opacity:.6,"&:hover":{backgroundColor:"inherit",cursor:"not-allowed"}},Dropzone_selectedFile:{color:"inherit",display:"flex",marginTop:e.spacing(),textTransform:"none"}}}))(H),Y=t(302),$=t(5),K=Object($.a)((function(){return{Loading:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",width:"100%",height:"100%",top:0,left:0,backgroundColor:"rgba(220, 220, 220, 0.6)",zIndex:1e4}}}))((function(e){var a=e.classes;return r.a.createElement("div",{className:a.Loading},r.a.createElement(Y.a,null))})),Q=Object($.a)((function(){return{LoadingWrapper:{position:"relative"}}}))((function(e){var a=e.loading,t=e.children,n=e.classes;return r.a.createElement("div",{className:n.LoadingWrapper},a&&r.a.createElement(K,null),t)})),X=t(240),Z=t.n(X),ee=function(e){return new Promise((function(a,t){var n=new FileReader;n.onload=function(e){var t=e.target.result,n=Z.a.read(t,{type:"binary"}),r=Object(u.a)(n.SheetNames,1)[0],o=n.Sheets[r],i=Z.a.utils.sheet_to_row_object_array(o,{defval:null});a(i)},n.onerror=function(e){t(e)},n.readAsBinaryString(e)}))},ae=function(e){return""===e||null==e||(Array.isArray(e)?!e.length:"object"===typeof e&&!Object.keys(e).length)},te=function(e){throw new Error(e)},ne={speciesName:{validate:function(e,a){return ae(e)&&te("Linha ".concat(a,": O nome da esp\xe9cie n\xe3o pode ser vazio")),e}},sex:{validate:function(e,a){ae(e)&&te("Linha ".concat(a,": O sexo n\xe3o pode ser vazio"));var t=Object.keys(C),n=e.toUpperCase();return t.includes(n)||te("Linha ".concat(a,": O sexo deve ser um dos valores: ").concat(t.toString())),n}},size:{validate:function(e,a){ae(e)&&te("Linha ".concat(a,": O tamanho n\xe3o pode ser vazio"));var t=Number(e);return isNaN(t)&&te("Linha ".concat(a,": Tamanho deve ser um n\xfamero")),t}}},re=[{format:"csv",mimeType:"text/csv"},{format:"ods",mimeType:"application/vnd.oasis.opendocument.spreadsheet"},{format:"xls",mimeType:"application/vnd.ms-excel"},{format:"xlsx",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}],oe=re.map((function(e){return e.format})),ie=re.map((function(e){return e.mimeType})),ce=function(e){return e.length||te("A tabela n\xe3o possui nenhum registro."),e.map((function(e,a){return Object.keys(e).reduce((function(t,n){var r=ne[n],o=e[n],i=a+2;return t[n]=r.validate?r.validate(o,i):o,t}),{})}))},le=function(){var e=Object(P.a)(_.a.mark((function e(a){var t,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(a);case 2:return t=e.sent,n=t.map((function(e){var a=Object.keys(ne);return Object.keys(e).reduce((function(t,n,r){return t[a[r]]=e[n],t}),{})})),e.abrupt("return",ce(n));case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),se=["Utilize o modelo como ponto de partida, ele cont\xe9m um exemplo do formato dos dados.",'O separador das c\xe9luas da tabela \xe9 "," (v\xedrgula), por isso evite valores com esse s\xedmbolo, caso precisar utilize o valor entre aspas ex: "especie, 2".',"A ordem das colunas deve ser: nome da esp\xe9cie | sexo | tamanho.",'O campo sexo deve ser um dos valores: "M ou F".','O campo tamanho deve ser um n\xfamero com a casa decimal separarda por "." (ponto). Ex: "1.45".'],ue=function(e){var a=e.open,t=e.onClose,n=e.onSubmit,o=r.a.useState(null),i=Object(u.a)(o,2),c=i[0],v=i[1],b=r.a.useState([]),E=Object(u.a)(b,2),x=E[0],y=E[1],A=r.a.useState(!1),j=Object(u.a)(A,2),w=j[0],O=j[1],D=function(){var e=Object(P.a)(_.a.mark((function e(a){var t,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,le(a);case 4:t=e.sent,y(t),v(null),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),n=e.t0.message,v(n);case 13:O(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}(),S=function(){var e=Object(P.a)(_.a.mark((function e(a){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),a.stopPropagation(),n(x);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(m.a,{open:a,onClose:t,disableBackdropClick:!0,maxWidth:"md"},r.a.createElement(Q,{loading:w},r.a.createElement(p.a,null,r.a.createElement(l.a,{display:"flex",justifyContent:"space-between"},"Adicionar Amostras")),r.a.createElement(d.a,null,r.a.createElement(s.a,null,"Instru\xe7\xf5es:"),r.a.createElement("ul",null,se.map((function(e,a){return r.a.createElement("li",{key:a},r.a.createElement(s.a,null,e))}))),r.a.createElement(l.a,{textAlign:"center"},r.a.createElement(g.a,{color:"primary",variant:"outlined",onClick:function(){return window.open("/s-dimorph/tabela-amostras-exemplo.csv")}},"Baixar Modelo")),r.a.createElement(f.a,null,"Formatos aceitos: ",oe.join(", ")),r.a.createElement(V,{onChange:D,acceptedMimeTypes:ie}),!!c&&r.a.createElement(l.a,{marginTop:"16px"},r.a.createElement(h.a,{severity:"error"},"Erro! ",c)),r.a.createElement(l.a,{marginY:"16px",display:"flex",justifyContent:"flex-end"},r.a.createElement(l.a,{marginRight:"16px"},r.a.createElement(g.a,{color:"primary",onClick:t},"Cancelar")),r.a.createElement(g.a,{color:"primary",variant:"contained",onClick:S,disabled:!!c||!x.length},"Confirmar")))))},me=function(e){var a=document.querySelector("#loading-wrapper");e?a.classList.add("loading-indicator"):a.classList.remove("loading-indicator")},pe=function(){return Array.apply(null,Array(35)).map((function(e){return N({speciesName:["A","B","C"][Math.floor(3*Math.random())],sex:["F","M"][Math.floor(2*Math.random())],size:Math.floor(10*Math.random())})}))},de=function(e){return Object.keys(e).reduce((function(a,t){var n=e[t],r=ve(n),o=r.males,i=r.females;!function(e){var a=e.males,t=e.females,n=e.currentSpecies;if(0===a.length)throw new Error("A esp\xe9cie ".concat(n," precisa conter pelo menos uma amostra do sexo masculino."));if(0===t.length)throw new Error("A esp\xe9cie ".concat(n," precisa conter pelo menos uma amostra do sexo feminino."))}({males:o,females:i,currentSpecies:t});var c=fe({males:o,females:i}),l=c.malesAverage,s=c.femalesAverage,u=he({malesAverage:l,femalesAverage:s});return[].concat(Object(x.a)(a),[{species:t,samples:n,males:o,females:i,malesAverage:l,femalesAverage:s,SDI:u}])}),[])},fe=function(e){var a=e.males,t=e.females;return{malesAverage:ge(a),femalesAverage:ge(t)}},ve=function(e){return{males:be.filterBy(e,"sex","M"),females:be.filterBy(e,"sex","F")}},ge=function(e){return e.length?e.reduce((function(e,a){return e+Number(a.size||0)}),0)/e.length:0},he=function(e){var a=e.malesAverage,t=e.femalesAverage;return a&&t?a>t?-1*(a/t-1):t/a-1:0},be={groupBy:function(e,a){return e.reduce((function(e,t){var n=e[t[a]]||[];return e[t[a]]=[].concat(Object(x.a)(n),[t]),e}),{})},filterBy:function(e,a,t){return e.filter((function(e){return e[a]===t}))}},Ee=function(e){var a=be.groupBy(e,"speciesName");return de(a)},xe=function(e){return Ee(e)},ye=function(){var e=r.a.useState([]),a=Object(u.a)(e,2),t=a[0],o=a[1],i=r.a.useState(null),c=Object(u.a)(i,2),s=c[0],m=c[1],p=r.a.useState(!1),d=Object(u.a)(p,2),f=d[0],v=d[1],h=Object(n.useRef)(null);Object(n.useEffect)((function(){me(!1)}),[t,s]),Object(n.useEffect)((function(){window.scrollTo(0,h.current.offsetTop)}),[s]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{justifyContent:"flex-end",marginBottom:2,display:"flex"},r.a.createElement(g.a,{onClick:function(){o(pe())},variant:"outlined",color:"primary"},"Gerar Amostras Aleat\xf3rias"),r.a.createElement(l.a,{marginLeft:2},r.a.createElement(g.a,{variant:"contained",color:"primary",onClick:function(){return v(!0)}},"Adicionar Amostras por Arquivo"))),r.a.createElement(R,{samples:t,onSampleAdd:function(e){var a=N(e);o([].concat(Object(x.a)(t),[a]))},onSampleDelete:function(e){var a=t.filter((function(a){return a.id!==e.id}));o(a)},onSampleUpdate:function(e){var a=t.map((function(a){return a.id===e.id?Object(E.a)({},a,{},e):a}));o(a)}}),r.a.createElement("span",{ref:h},r.a.createElement(I,{calculationResult:s,disabled:0===t.length,handleCalculation:function(){me(!0);try{var e=xe(t);m(e)}catch(a){window.openAlertModal({title:"Erro ao calcular",error:a.message})}me(!1)}})),r.a.createElement(ue,{open:f,onClose:function(){return v(!1)},onSubmit:function(e){me(!0),v(!1);var a=e.map(N);o(a)}}))},Ae=(t(429),function(){return r.a.createElement(c.a,{component:"main",p:5},r.a.createElement(b,null),r.a.createElement(l.a,{mt:2,py:3,textAlign:"center"},r.a.createElement(s.a,{variant:"h2",paragraph:!0},"S-Dimorph"),r.a.createElement(ye,null)))});i.a.render(r.a.createElement(Ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[352,1,2]]]);
//# sourceMappingURL=main.f36a3aa2.chunk.js.map